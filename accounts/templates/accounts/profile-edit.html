{% extends 'accounts/base.html' %}
{% load static %}

{% block title %}PSYTEST | Edit Profile{% endblock %}

{% block content %}

<header>
    {% include 'partials/_navbar.html' %}
</header>
<main class="container">
    <div class="row justify-content-center">
        <form method="post" class="p-4 border rounded-3 bg-light mt-5">
            {% csrf_token %}
            <h3 class="text-center color-teal mb-3">Edit Your Profile</h3>
            <div class="row">
                <div class="form-group col-xs-6 col-sm-6">
                    <div class="form-floating mb-3">
                        <input type="text" name="first_name" value="{{user.first_name}}" class="form-control"
                            placeholder="Type your first name" id="id_first_name" required>
                        <label for="id_first_name" class="text-muted">First Name</label>
                        {{form.first_name.errors}}
                    </div>
                </div>
                <div class="form-group col-xs-6 col-sm-6">
                    <div class="form-floating mb-3">
                        <input type="text" name="last_name" value="{{user.last_name}}" class="form-control"
                            placeholder="Type your last name" id="id_last_name" required>
                        <label for="id_last_name" class="text-muted">Last Name</label>
                        {{form.last_name.errors}}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6 col-sm-6">
                    <div class="form-floating mb-3">
                        <input type="date" name="date_of_birth" class="form-control" id="id_date_of_birth"
                            value="{{user.profile.date_of_birth|date:'Y-m-d'}}" required>
                        <label for="id_date_of_birth">Birthdate</label>
                    </div>
                </div>
                <div class="form-group col-xs-6 col-sm-6">
                    <div class="form-floating mb-3">
                        <select name="gender" class="form-select" id="id_gender">
                            {% for x,gender in form.fields.gender.choices %}
                            <option {% if initial.gender == gender %}  selected {% endif %} value="{{gender}}">
                                {{gender}}
                            </option>{% endfor %}
                        </select>
                        <label for="id_gender">{{form.gender.label}}</label>
                        {{form.gender.errors}}
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6 col-sm-4">
                    <div class="form-floating mb-3">
                        <select name="department" class="form-select" id="id_department">
                        </select>
                        <label for="id_department">{{form.department.label}}</label>
                        {{form.department.errors}}
                    </div>
                </div>
                <div class="form-group col-xs-6 col-sm-4">
                    <div class="form-floating mb-3">
                        <select name="program" class="form-select" id="id_program">
                            <option value="">---------------------</option>
                        </select>
                        <label for="id_program">{{form.program.label}}</label>
                        {{form.program.errors}}
                    </div>
                </div>
                <div class="form-group col-xs-6 col-sm-4">
                    <div class="form-floating mb-3">
                        <select name="year" class="form-select" id="id_year">
                            <option value="">---------------------</option>
                        </select>
                        <label for="id_year">{{form.year.label}}</label>
                        {{form.year.errors}}
                    </div>
                </div>
            </div>
            <div class="visually-hidden">
                <div class="form-group">
                    <div class="form-floating mb-3">
                        <input type="text" name="username" value="{{user.username}}" class="form-control"
                            placeholder="Type your username" id="id_username" readonly>
                        <label for="id_username" class="text-muted">Username</label>
                    </div>
                </div>
                {% load socialaccount %}
                {% get_social_accounts user as accounts %}
                <div class="form-group">
                    <div class="form-floating mb-3">
                        <input type="email" name="email" value="{{user.email}}" class="form-control"
                            placeholder="Type your email address" readonly id="id_email">
                        <label for="id_email" class="text-muted">Email</label>
                        {{form.email.errors}}
                    </div>
                </div>
                <div class="visually-hidden">
                    {{form.is_superuser}}
                </div>
            </div>
            <div class="d-flex justify-content-end align-items-center gap-3">
                <div>
                    <a class="link-teal mt-2" href="{% url 'password_reset' %}">Change password?</a>
                </div>
                <div class="p-auto">
                    <button type="submit" class="btn btn-success m-auto">Save</button>
                </div>
            </div>
        </form>
    </div>
</main>
<script>
    {% include 'accounts/scripts/main.js' %}

</script>
{% endblock %}